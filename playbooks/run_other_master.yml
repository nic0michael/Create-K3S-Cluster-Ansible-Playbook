# playbooks/run_other_master.yml

# Please dont use this I have not got it working
- name: Your Ansible Playbook
  hosts: other_master_nodes
  gather_facts: false
  vars:
    inventory_hostname: "other_master_nodes"

  vars_files:
    - /path/to/your/credentials_file.yml  # Include the file with server_users variable

  tasks:
    - name: Add server SSH key to known_hosts
      known_hosts:
        name: "{{ inventory_hostname }}"
        key: "{{ server_users.ssh_public_key }}"
        path: "/home/{{ server_users.username }}/.ssh/known_hosts"
        state: present

    - name: Execute command as nickm using sudo
      command: whoami
      become: true
      become_user: "{{ server_users.username }}"
